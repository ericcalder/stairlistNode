<!DOCTYPE html>
<html>
  <head>
    <title></title>
    

    <% include ../views/partials/head %>
    <link rel='stylesheet' href='/stylesheets/edit.css' />
    <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    
    
  </head>
  <header>
    <% include ../views/partials/header %>
  </header>
<body>
  <h3>Index page</h3>
  <h4>Week Ending: </h4>
  <h5></h5>
  <select>
    <option value=0>All</option>
    <option value=2>A_week</option>
    <option value=1>B_week</option>
  </select>
  <p></p>
  
  <div class='container'>
  
  </div>
	   
</body>


</html>
<script>
  ///////////////////////////////
  Date.prototype.toShortFormat = function() {

    var month_names =["Jan","Feb","Mar",
                      "Apr","May","Jun",
                      "Jul","Aug","Sep",
                      "Oct","Nov","Dec"];
    
    var day = this.getDate();
    var month_index = this.getMonth();
    var year = this.getFullYear();
    
    return "" + day + " " + month_names[month_index] + " " + year;
}
   Date.prototype.toMySqlFormat = function() {
    var month_names =["01","02","03",
                      "04","05","06",
                      "07","08","09",
                      "10","11","12"];
    var day = this.getDate();
    var month_index = this.getMonth();
    var year = this.getFullYear();
    
    return "" + year + "-" + month_names[month_index] + "-" + day;
}

Date.prototype.getWeek = function() {
  var sixjan = new Date(this.getFullYear(),0,6);
  return Math.ceil((((this - sixjan) / 86400000) + sixjan.getDay()+1)/7);
}


  /////////////////////////
  var week=1;

  var today = new Date();
  var end_of_week=new Date();
  end_of_week.setDate(end_of_week.getDate() + 7-today.getDay());
  //end_of_week=end_of_week.toMySqlFormat();
  //console.log('end_of_week+++'+end_of_week.toMySqlFormat())
  //$('body p').append(end_of_week)
  $('body h4').append(end_of_week.toShortFormat())
  if(end_of_week.getWeek()%2==0){
    $('body h5').append('   A_week')  
  }
  else {$('body h5').append('   B_week')}
  //$('body h4').append(end_of_week.getWeek())
  $('body select').on('change',function(){
    console.log('in select option')
    var week_=$(this).val()
    var week__=$('body select option:selected').text()
    console.log('value=='+$(this).val())
    console.log('text=='+week__)

    var link='<a href="/index/export/?week='+week_+'&weekEnd='
    +end_of_week.toMySqlFormat()+'">'+week__+'</a>'
  $('body p').append(link)
  })

</script>